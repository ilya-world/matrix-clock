<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Matrix Clock</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="app__header">
        <div>
          <h1>Матрица времени</h1>
          <p class="app__subtitle">
            1 квадрат = 10 минут. Серые клетки — прошедшее время.
          </p>
        </div>
      </header>

      <div class="app__layout">
        <section class="matrix">
          <div class="matrix__legend">
            <span class="legend legend--elapsed">Прошедшее время</span>
            <span class="legend legend--overflow">Время за пределами 100 клеток</span>
          </div>
          <div id="grid" class="matrix__grid" aria-live="polite"></div>
          <div id="cellDetails" class="cell-details" hidden>
            <div class="cell-details__header">
              <div>
                <strong id="cellDetailsTime">00:00–00:10</strong>
                <div class="cell-details__meta">
                  <span id="cellDetailsLabel">Без события</span>
                </div>
              </div>
              <div class="cell-details__actions">
                <button type="button" id="cellCopy" class="button button--ghost">
                  Копировать
                </button>
                <button type="button" id="cellPaste" class="button button--ghost">
                  Вставить
                </button>
              </div>
            </div>
            <label class="control">
              <span>Комментарий</span>
              <textarea
                id="cellDetailsComment"
                class="cell-details__comment"
                rows="3"
                placeholder="Добавьте комментарий"
              ></textarea>
            </label>
          </div>
          <div class="matrix__actions">
            <button type="button" id="importButton" class="button">
              Импорт
            </button>
          </div>
        </section>

        <aside class="sidebar">
          <section class="card">
            <label class="control">
              <span>Начало дня</span>
              <input id="startTime" type="time" value="07:00" />
            </label>
            <label class="control">
              <span>Конец дня</span>
              <input id="endTime" type="time" value="04:00" />
              <span id="endTimeHint" class="control__hint"></span>
            </label>
            <label class="control control--toggle">
              <input id="cellTimeToggle" type="checkbox" />
              <span>Показывать время в ячейках</span>
            </label>
          </section>

          <section class="palette">
            <div class="palette__header">
              <h2>Палитра</h2>
              <p>Добавляйте цвета и отмечайте ими ячейки.</p>
            </div>
            <form id="paletteForm" class="palette__form">
              <label class="control">
                <span>Цвет</span>
                <input id="colorInput" type="color" value="#ff6fae" />
              </label>
              <label class="control">
                <span>Группа</span>
                <select id="groupSelect" class="palette__select-group"></select>
              </label>
              <label class="control">
                <span>Назначение</span>
                <input
                  id="labelInput"
                  type="text"
                  placeholder="Например, работа"
                  maxlength="24"
                  required
                />
              </label>
              <button type="submit" class="button">Добавить</button>
              <button type="button" id="eraser" class="button button--ghost">
                Ластик
              </button>
            </form>
            <form id="groupForm" class="palette__group-form">
              <label class="control">
                <span>Новая группа</span>
                <input
                  id="groupLabelInput"
                  type="text"
                  placeholder="Например, дом"
                  maxlength="24"
                  required
                />
              </label>
              <label class="control">
                <span>Цвет группы</span>
                <input id="groupColorInput" type="color" value="#7c8cff" />
              </label>
              <button type="submit" class="button button--ghost">
                Добавить группу
              </button>
            </form>
            <div id="paletteList" class="palette__list" aria-live="polite"></div>
            <div id="paletteSettings" class="palette__settings" hidden>
              <div class="palette__settings-header">
                <h3>Настройка события</h3>
              </div>
              <label class="control">
                <span>Название события</span>
                <input
                  id="paletteEditLabel"
                  type="text"
                  placeholder="Название"
                  maxlength="24"
                />
              </label>
              <label class="control">
                <span>Цвет события</span>
                <input id="paletteEditColor" type="color" value="#ff6fae" />
              </label>
              <div class="palette__settings-actions">
                <button
                  type="button"
                  id="paletteDelete"
                  class="button button--ghost"
                >
                  Удалить событие
                </button>
              </div>
            </div>
          </section>

          <section class="card">
            <div class="days">
              <div class="days__header">
                <h2>Сохраненные дни</h2>
                <p>Текущий и предыдущие записи.</p>
              </div>
              <div id="daysList" class="days__list" aria-live="polite"></div>
            </div>
          </section>
        </aside>
      </div>
    </main>

    <div id="importModal" class="modal" aria-hidden="true" role="dialog">
      <div class="modal__backdrop" data-modal-close></div>
      <div class="modal__content" role="document">
        <div class="modal__header">
          <h2>Импорт встреч</h2>
          <button type="button" class="modal__close" data-modal-close>
            ×
          </button>
        </div>
        <p class="modal__hint">
          Вставьте список встреч. Каждая строка: <strong>XX:XX-YY:YY NAME</strong>.
        </p>
        <textarea
          id="importTextarea"
          class="modal__textarea"
          rows="8"
          placeholder="09:00-10:00 Планирование&#10;11:30-12:10 Созвон"
        ></textarea>
        <div class="modal__actions">
          <button type="button" class="button button--ghost" data-modal-close>
            Отмена
          </button>
          <button type="button" id="importSubmit" class="button">
            Импортировать
          </button>
        </div>
        <p id="importStatus" class="modal__status" role="status" aria-live="polite"></p>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
